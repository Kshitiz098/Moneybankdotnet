@page "/login"
@inject AuthenticationService AuthenticationService
@inject NavigationManager Navigation
@inject IJSRuntime JSRuntime
@inject JsonDataService<ModelList> DataStoreService

<h3>Login</h3>

<div class="login-form">
    <EditForm Model="user" OnValidSubmit="HandleLogin">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <!-- Username Field -->
        <div class="form-group">
            <label for="username">Username</label>
            <InputText id="username" @bind-Value="user.UserName" class="form-control" />
        </div>

        <!-- Password Field -->
        <div class="form-group">
            <label for="password">Password</label>
            <InputText id="password" @bind-Value="user.UserPassword" type="password" class="form-control" />
        </div>

        <!-- Preferred Currency Dropdown -->
        <div class="form-group">
            <label for="preferredCurrency">Preferred Currency</label>
            <select id="preferredCurrency" @bind="user.PreferredCurrency" class="form-control">
                <option value="USD">USD</option>
                <option value="EUR">EUR</option>
                <option value="INR">INR</option>
                <option value="NPR">NPR</option>
            </select>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary w-100">Login</button>
    </EditForm>

    <!-- Redirect to Register -->
    <div class="mt-3">
        <span>Don't have an account? </span>
        <button class="btn btn-link" @onclick="GoToRegisterPage">Register</button>
    </div>
</div>

<!-- Error Message -->
@if (!string.IsNullOrEmpty(ErrorMessage))
{
    <p class="text-danger mt-2">@ErrorMessage</p>
}


